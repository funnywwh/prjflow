# v0.3.0 发布说明

## 版本信息

- **版本号**: v0.3.0
- **发布日期**: 2025年11月26日
- **主要更新**: 禅道数据迁移工具、通用组件封装、项目详情页优化

---

## 🎉 新功能

### 1. 禅道数据迁移工具

提供了完整的从禅道（Zentao）到本系统的数据迁移工具，支持迁移以下数据类型：

**支持迁移的数据类型**：
- ✅ 部门（zt_dept -> departments）
- ✅ 角色和权限（zt_group + zt_grouppriv -> roles + permissions）
- ✅ 用户（zt_user -> users）
- ✅ 项目（zt_project -> projects）
- ✅ 项目模块（zt_module -> modules）
- ✅ 版本（zt_build -> versions）
- ✅ 需求（zt_story -> requirements）
- ✅ 任务（zt_task -> tasks）
- ✅ Bug（zt_bug -> bugs）
- ✅ 项目成员（zt_team -> project_members）

**功能特性**：
- ✅ ID映射关系维护，确保外键关联正确
- ✅ 数据去重和冲突处理
- ✅ 支持通过产品查找项目（版本迁移）
- ✅ 支持从任务、需求、Bug推断项目成员
- ✅ 详细的迁移日志和统计信息

**使用方法**：
详细使用说明请参考 [数据迁移工具文档](../backend/cmd/migrate/README.md)

### 2. 通用组件封装

将功能模块管理封装为通用组件 `ModuleManagement`，可在项目任何地方复用。

**功能特性**：
- ✅ 支持通过 props 控制显示方式（卡片/无卡片）
- ✅ 支持自定义标题
- ✅ 提供事件通知（change、created、updated、deleted）
- ✅ 暴露方法供父组件调用（loadModules、refresh）
- ✅ 完整的 TypeScript 类型定义

**使用场景**：
- 项目列表页的模块管理对话框
- 项目详情页的模块管理对话框
- 独立的模块管理页面

### 3. 项目详情页优化

优化了项目详情页的用户体验和功能。

**优化内容**：
- ✅ 修复页面滚动问题（使用flex布局和overflow-y实现内容区域滚动）
- ✅ 项目描述支持Markdown格式渲染显示
- ✅ 功能模块管理直接弹出对话框（无需跳转）

---

## 🔧 功能优化

### 前端优化

1. **项目详情页**
   - 修复页面无法滚动的问题
   - 项目描述使用MarkdownEditor组件以Markdown格式渲染
   - 功能模块按钮直接弹出管理对话框

2. **通用组件**
   - 模块管理组件封装为通用组件
   - 支持在不同场景下复用
   - 优化了组件的可配置性

### 后端优化

1. **数据迁移工具**
   - 完善了迁移流程和错误处理
   - 添加了详细的迁移日志
   - 支持数据去重和冲突处理

---

## 📝 技术改进

1. **组件架构**
   - 通用组件封装，提高代码复用性
   - 统一的事件通知机制
   - 完善的TypeScript类型定义

2. **用户体验**
   - 修复页面滚动问题
   - Markdown内容渲染优化
   - 交互流程优化（减少页面跳转）

---

## 🐛 问题修复

1. ✅ 修复项目详情页无法滚动的问题
2. ✅ 修复TypeScript编译错误（ModuleManagement组件）
3. ✅ 优化项目描述显示（支持Markdown格式）

---

## 📚 文档更新

- ✅ 更新所有文档的更新日期为2025年11月26日
- ✅ 添加数据迁移工具使用文档
- ✅ 更新开发计划，记录v0.3.0新功能
- ✅ 更新数据库设计文档，添加数据迁移说明

---

## 🔄 从 v0.2.0 升级到 v0.3.0

### 升级步骤

1. **备份数据**
   ```bash
   # 备份数据库文件（如果使用SQLite）
   cp backend/data.db backend/data.db.backup
   ```

2. **更新代码**
   ```bash
   git pull origin main
   # 或
   git checkout v0.3.0
   ```

3. **重新构建**
   ```bash
   # 后端
   cd backend
   make build-linux
   
   # 前端
   cd frontend
   yarn build
   ```

4. **重启服务**
   ```bash
   # 停止旧服务
   # 启动新服务
   ./server
   ```

### 注意事项

- 数据迁移工具需要单独配置，参考 [数据迁移工具文档](../backend/cmd/migrate/README.md)
- 前端需要重新构建以包含新的组件
- 建议在测试环境先验证升级

---

## 📊 版本统计

- **新增功能**: 3个主要功能
- **优化改进**: 多项用户体验优化
- **问题修复**: 3个问题修复
- **文档更新**: 全面更新

---

**文档版本**: v0.3.0  
**最后更新**: 2025年11月26日  
**维护者**: 开发团队

