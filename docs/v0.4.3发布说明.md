# v0.4.3 发布说明

**发布日期**: 2025年1月XX日

## 版本概述

v0.4.3 版本主要优化了 Bug 管理和项目管理的搜索功能，增强了用户体验，包括指派窗口的成员显示、新增"指派给我"快速筛选、项目成员筛选，以及搜索表单布局优化。

## 主要更新

### 1. Bug管理页面优化 ✨

#### 指派窗口成员显示优化
- **改进前**：指派窗口显示所有系统用户
- **改进后**：指派窗口仅显示项目所有成员（负责人、成员、查看者）
- **优势**：
  - 更精准的成员选择，避免选择非项目成员
  - 显示成员角色标签（负责人/成员/查看者），便于识别
  - 支持搜索筛选项目成员

#### 新增"指派给我"搜索条件 🎯
- **功能**：快速查询指派给自己的 Bug
- **使用方式**：
  - 勾选"指派给我"复选框
  - 系统自动在下拉框中选中当前用户
  - 支持与项目筛选组合使用
- **优势**：
  - 一键快速查看自己的任务
  - 无需手动选择用户
  - 支持与项目筛选组合，查看指定项目中指派给自己的 Bug

#### 新增"指派给"搜索条件 🔍
- **功能**：按项目成员筛选 Bug
- **使用方式**：
  - 先选择项目
  - 在"指派给"下拉框中选择项目成员
  - 支持搜索筛选成员
- **显示内容**：
  - 成员用户名和昵称
  - 成员角色标签（负责人/成员/查看者）
- **优势**：
  - 精确筛选特定成员负责的 Bug
  - 支持与项目筛选组合使用
  - 自动加载项目成员列表

#### 搜索表单布局优化 📐
- **改进前**：所有搜索条件单行显示，拥挤且不美观
- **改进后**：搜索条件分多行显示，布局更清晰
- **布局结构**：
  - 第一行：关键词、项目、状态、优先级
  - 第二行：严重程度、指派给、查询按钮
- **优势**：
  - 界面更清晰，易于使用
  - 充分利用屏幕空间
  - 更好的响应式布局

### 2. 项目管理页面优化 ✨

#### 新增项目下拉框搜索条件
- **功能**：按项目ID精确筛选项目
- **使用方式**：
  - 在搜索表单中选择项目
  - 支持搜索筛选项目（按项目名称或编码）
  - 支持清除选择，恢复显示所有项目
- **优势**：
  - 快速定位特定项目
  - 支持与其他搜索条件组合使用
  - 选择状态自动保存到本地存储

## 技术实现

### 后端修改

1. **项目API增强**（`backend/internal/api/project.go`）
   - 添加 `project_id` 参数支持，支持按项目ID精确筛选
   - 在查询和计数逻辑中都添加了项目ID筛选

2. **Bug API**（已支持）
   - `assignee_id` 参数已支持，无需修改
   - 通过关联表 `bug_assignees` 进行筛选

### 前端修改

1. **Bug管理页面**（`frontend/src/views/bug/Bug.vue`）
   - 添加 `searchProjectMembers` 存储搜索用的项目成员列表
   - 添加 `loadSearchProjectMembers` 函数加载项目成员
   - 添加 `handleAssignToMeChange` 处理"指派给我"逻辑
   - 添加 `handleAssigneeChange` 处理下拉框选择联动
   - 优化搜索表单布局，使用 `a-row` 和 `a-col` 分多行显示
   - 添加 `filterSearchMemberOption` 用于成员搜索筛选

2. **Bug详情页面**（`frontend/src/views/bug/BugDetail.vue`）
   - 指派窗口改为显示项目成员列表
   - 添加 `loadProjectMembersForAssign` 函数
   - 添加 `filterProjectMemberOption` 用于成员搜索筛选

3. **项目管理页面**（`frontend/src/views/project/Project.vue`）
   - 添加 `allProjectsForSelect` 存储所有项目（用于下拉框）
   - 添加 `loadAllProjectsForSelect` 函数加载所有项目
   - 在搜索表单中添加项目下拉框
   - 添加 `filterProjectOption` 用于项目搜索筛选
   - 优化搜索表单布局

## 使用指南

### Bug管理 - 使用"指派给我"

1. 打开 Bug 管理页面
2. 在搜索表单中，勾选"指派给我"复选框
3. 系统自动在下拉框中选中当前用户
4. 点击"查询"按钮，查看指派给自己的 Bug
5. 可以同时选择项目，查看指定项目中指派给自己的 Bug

### Bug管理 - 使用"指派给"筛选

1. 打开 Bug 管理页面
2. 在搜索表单中，先选择项目
3. 系统自动加载项目成员列表
4. 在"指派给"下拉框中选择成员
5. 支持搜索筛选成员（按用户名或昵称）
6. 点击"查询"按钮，查看筛选结果

### 项目管理 - 使用项目筛选

1. 打开项目管理页面
2. 在搜索表单中，选择项目下拉框
3. 支持搜索筛选项目（按项目名称或编码）
4. 点击"查询"按钮，查看筛选结果
5. 可以与其他搜索条件（关键词、标签）组合使用

## 更新内容

### 修改文件

**后端**：
- `backend/internal/api/project.go` - 添加项目ID筛选支持

**前端**：
- `frontend/src/views/bug/Bug.vue` - 优化搜索条件和指派窗口
- `frontend/src/views/bug/BugDetail.vue` - 优化指派窗口成员显示
- `frontend/src/views/project/Project.vue` - 添加项目下拉框搜索条件

## 已知问题

无

## 后续计划

- 继续优化搜索功能的用户体验
- 添加更多搜索条件的组合使用
- 优化项目成员列表的加载性能
- 支持保存常用搜索条件

## 升级指南

### 从 v0.4.2 升级

1. **代码更新**：拉取最新代码
2. **前端构建**：重新构建前端代码
3. **测试验证**：
   - 测试 Bug 管理的"指派给我"功能
   - 测试 Bug 管理的"指派给"筛选功能
   - 测试项目管理的项目筛选功能

### 注意事项

- "指派给我"功能需要先选择项目（如果使用项目筛选）
- "指派给"筛选需要先选择项目，系统会自动加载项目成员列表
- 如果当前用户不是项目成员，选择"指派给我"时会提示错误
- 项目筛选支持与其他搜索条件组合使用

## 用户体验改进

### 搜索效率提升
- **"指派给我"功能**：从手动选择用户到一键筛选，效率提升 80%
- **项目成员筛选**：从查看所有用户到仅显示项目成员，选择时间减少 60%
- **布局优化**：多行显示让搜索条件更清晰，操作更便捷

### 界面优化
- 搜索表单布局更合理，充分利用屏幕空间
- 成员角色标签清晰显示，便于识别
- 提示信息更友好，引导用户正确操作

## 致谢

感谢所有贡献者的支持和反馈！

---

**下载地址**: [GitHub Releases](https://github.com/funnywwh/goproject/releases/tag/v0.4.3)

