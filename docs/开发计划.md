# 项目管理系统开发计划

## 项目概述

开发一个基于Go+Gin+ORM和Vue3+Ant Design Vue的全栈项目管理软件，采用TDD开发方式，支持微信登录、完整的权限体系、项目/需求/Bug/任务/版本/测试等全生命周期管理功能，以及甘特图、资源管理、工作报告、插件系统（支持前端界面）、关系图生成等高级功能。前端支持Markdown编辑，数据库支持SQLite和MySQL。

## 技术栈

- **后端**: Go + Gin + GORM + SQLite（支持未来迁移到MySQL）
- **前端**: Vue 3 + TypeScript + Ant Design Vue + Vite + Markdown编辑器
- **认证**: 微信开放平台扫码登录
- **架构**: 单体应用，前后端分离
- **测试**: Go test + testify（单元测试覆盖率100%，TDD开发）
- **开发方式**: TDD（测试驱动开发）+ 详细设计文档先行

## 项目结构

### 后端结构 (`backend/`)

```
backend/
├── cmd/
│   └── server/
│       └── main.go          # 应用入口
├── internal/
│   ├── api/                 # API路由层
│   ├── service/             # 业务逻辑层
│   ├── model/               # 数据模型
│   ├── repository/          # 数据访问层
│   ├── middleware/          # 中间件（认证、权限、日志等）
│   ├── config/              # 配置管理
│   └── utils/               # 工具函数
├── pkg/                     # 可复用的包
│   ├── auth/                # 认证相关
│   ├── wechat/              # 微信登录
│   ├── permission/          # 权限控制
│   ├── diagram/             # 关系图生成
│   └── plugin/              # 插件系统
├── migrations/              # 数据库迁移
├── tests/                   # 测试文件
│   ├── unit/                # 单元测试
│   └── integration/        # 集成测试
├── docs/                    # 设计文档
│   ├── design/              # 详细设计文档
│   └── api/                 # API文档
├── go.mod
└── go.sum
```

### 前端结构 (`frontend/`)

```
frontend/
├── src/
│   ├── api/                 # API接口
│   ├── views/               # 页面组件
│   │   ├── auth/            # 登录页面
│   │   ├── user/            # 用户管理
│   │   ├── project/         # 项目管理
│   │   ├── task/            # 任务管理
│   │   ├── gantt/           # 甘特图
│   │   ├── report/          # 工作报告
│   │   ├── plugin/          # 插件管理
│   │   └── dashboard/       # 个人工作台
│   ├── components/          # 公共组件
│   │   ├── MarkdownEditor.vue  # Markdown编辑器
│   │   ├── GanttChart.vue      # 甘特图组件
│   │   └── RelationDiagram.vue # 关系图组件
│   ├── stores/              # 状态管理（Pinia）
│   ├── router/              # 路由配置
│   ├── utils/               # 工具函数
│   └── main.ts
├── package.json
└── vite.config.ts
```

## 核心数据模型设计

### 1. 用户与权限模块

- **User**: 用户表（关联微信OpenID、部门、邮箱等）
- **Department**: 部门表（层级结构）
- **Role**: 角色表（角色名称、描述）
- **Permission**: 权限表（权限代码、名称、资源类型）
- **UserRole**: 用户角色关联表
- **RolePermission**: 角色权限关联表

### 2. 项目模块

- **Project**: 项目表（项目名称、编码、描述、状态、开始/结束日期）
- **ProjectMember**: 项目成员表（关联User和Project，角色）
- **Tag**: 标签表（标签名称、描述、颜色）
- **ProjectTag**: 项目标签关联表（多对多关系）

### 3. 需求与Bug模块

- **Requirement**: 需求表（关联Project，状态、优先级，支持Markdown内容）
- **Bug**: Bug表（关联Project，状态、优先级、严重程度，支持Markdown描述）
- **BugAssignee**: Bug分配表（关联User和Bug）

### 4. 任务与看板模块

- **Task**: 任务表（关联Project，状态、优先级、开始/结束时间、前置任务依赖，支持Markdown描述）
- **TaskStatus**: 任务状态枚举（待办/进行中/已完成/已取消等）
- **Board**: 看板表（关联Project）
- **BoardColumn**: 看板列（关联Board，列顺序）


### 6. 版本与构建模块

- **Build**: 构建表（关联Project，构建号、状态、构建时间）
- **Version**: 版本表（一个Build产生一个Version，版本号、发布说明，支持Markdown）

### 7. 测试模块

- **TestCase**: 测试单表（关联Project，状态、测试类型，支持Markdown测试步骤）
- **TestReport**: 测试报告表（关联TestCase，测试结果、报告内容，支持Markdown）
- **TestCaseBug**: 测试单-Bug关联表
- **TestCaseReport**: 测试单-测试报告关联表

### 8. 资源管理模块

- **Resource**: 人员资源表（关联User和Project）
- **ResourceAllocation**: 资源分配表（按小时记录，包含日期、小时数、关联任务/项目）

### 9. 插件管理模块

- **Plugin**: 插件表（插件信息、版本、状态、插件路径、前端路由配置、菜单配置）
- **PluginConfig**: 插件配置表（插件参数配置，键值对）
- **PluginHook**: 插件钩子表（插件生命周期钩子注册）
- **PluginRoute**: 插件路由表（插件前端路由注册，菜单项配置）

### 10. 工作报告模块

- **DailyReport**: 日报表（关联User、日期、工作内容、工时、关联任务/项目、状态，支持Markdown）
- **WeeklyReport**: 周报表（关联User、周次、工作总结、下周计划、关联任务/项目、状态，支持Markdown）

### 11. 关系图模块

- **EntityRelation**: 实体关系配置表（可选，用于自定义关系图展示）

### 12. 个人工作台模块

- **UserDashboard**: 用户工作台配置表（可选，用于保存用户个性化配置）
- 聚合查询：用户相关的任务、Bug、需求、项目、工作报告等数据

## 开发流程规范

### TDD开发流程

1. **编写详细设计文档**：每个功能模块开发前，先编写详细设计文档（包含数据模型、API设计、业务逻辑、测试用例设计）
2. **编写单元测试**：根据设计文档，先编写完整的单元测试（覆盖率目标100%）
3. **运行测试**：运行测试确保失败（Red阶段）
4. **实现功能**：编写最小代码使测试通过（Green阶段）
5. **重构优化**：在测试通过的基础上重构代码（Refactor阶段）
6. **测试覆盖率检查**：使用`go test -cover`确保覆盖率100%

### 数据库抽象设计

- 使用GORM的数据库抽象层，支持SQLite和MySQL
- 配置文件中支持数据库类型切换（`database.type: sqlite|mysql`）
- 数据库迁移文件兼容两种数据库
- 避免使用数据库特定的SQL语法
- 使用GORM的数据库方言处理差异

### 详细设计文档要求

每个开发阶段开始前，需要产出：

- **数据模型设计**：ER图、字段说明、关联关系、索引设计
- **API接口设计**：请求/响应格式、状态码、错误处理、Swagger注释
- **业务逻辑设计**：流程图、状态机、业务规则、异常处理
- **测试用例设计**：单元测试场景、集成测试场景、边界条件
- **前端页面设计**：UI/UX、交互流程、组件设计、状态管理

## 开发阶段

### 阶段0: 详细设计文档 ✅

1. ✅ 编写系统总体设计文档（架构设计、技术选型说明）
2. ✅ 编写数据库设计文档（ER图、表结构、索引设计、关系说明）
3. ✅ 编写API接口设计文档（RESTful规范、统一响应格式、错误码定义）
4. ✅ 编写前端架构设计文档（组件设计、状态管理、路由设计、Markdown编辑器集成）
5. ✅ 编写测试策略文档（单元测试、集成测试、覆盖率要求、测试工具）
6. ✅ 编写插件系统设计文档（插件接口规范、前端界面注册机制）

### 阶段1: 项目初始化与基础架构 ✅

1. ✅ 初始化Go项目，配置Gin、GORM、SQLite/MySQL支持
2. ✅ 初始化Vue3项目，配置Vite、Ant Design Vue、TypeScript、Pinia
3. ✅ 配置开发环境（热重载、代理、环境变量）
4. ✅ 设计数据库Schema，创建迁移文件（兼容SQLite和MySQL）
5. ✅ 实现基础中间件（日志、错误处理、CORS、请求ID）
6. ✅ 实现统一响应格式和错误处理
7. ✅ 配置测试环境（testify、mock工具）
8. ✅ 集成Markdown编辑器组件（使用marked和highlight.js）

### 阶段2: 认证与权限系统（TDD） ✅

1. ✅ **设计文档**：编写认证与权限系统详细设计
2. ⏳ **单元测试**：编写认证、权限相关单元测试
3. ✅ 集成微信开放平台SDK，实现扫码登录
4. ✅ 实现JWT Token认证机制（生成、验证、刷新）
5. ✅ 实现RBAC权限控制中间件
6. ✅ 开发用户管理、角色管理、部门管理、权限管理API
7. ✅ 开发对应的前端页面和路由守卫
8. ✅ 实现多级菜单和菜单权限控制
9. ✅ 实现菜单权限和操作权限分离（菜单权限控制菜单显示，操作权限控制API访问）
10. ✅ 实现权限按钮级控制（v-permission指令和PermissionButton组件）
11. ⏳ **测试覆盖**：确保单元测试覆盖率100%
10. ✅ 用户昵称功能（username用于登录，nickname用于显示）
11. ✅ 扫码添加用户功能完善
12. ✅ 软删除用户恢复机制

### 阶段2.5: 个人工作台（TDD） ✅

1. ✅ **设计文档**：编写个人工作台详细设计（数据聚合、卡片设计、快速入口）
2. ⏳ **单元测试**：编写个人工作台相关单元测试
3. ✅ 实现个人工作台API（聚合查询用户相关的所有事务）
   - ✅ 我的任务（待办、进行中、已完成）
   - ✅ 我的Bug（待处理、处理中、已解决）
   - ✅ 我的需求（进行中、已完成）
   - ✅ 我的项目（参与的项目列表）
   - ⏳ 我的工作报告（待提交、已提交、待审批）
   - ⏳ 我的资源分配（本周、本月工时统计）
4. ✅ 实现工作台数据统计API（任务数、Bug数、项目数等）
5. ✅ 开发个人工作台前端页面（卡片式布局、快速入口、数据统计）
6. ✅ 实现点击卡片直接跳转到相关功能页面
7. ✅ 实现工作台数据实时刷新
8. ⏳ 实现工作台个性化配置（卡片排序、显示/隐藏）
9. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段3: 项目管理（TDD） ✅

1. ✅ **设计文档**：编写项目管理详细设计
2. ⏳ **单元测试**：编写项目相关单元测试
3. ✅ 实现项目CRUD API
4. ✅ 实现项目成员管理API
5. ✅ 开发项目管理前端页面
6. ✅ 实现项目统计和概览（任务、Bug、需求、成员统计）
7. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段4: 需求与Bug管理（TDD） ✅

1. ✅ **设计文档**：编写需求与Bug管理详细设计
2. ⏳ **单元测试**：编写需求、Bug相关单元测试
3. ✅ 实现需求管理API（支持关联项目，状态流转，Markdown内容）
4. ✅ 实现Bug追踪API（状态流转、分配、优先级管理，Markdown描述）
5. ✅ 开发需求管理、Bug管理前端页面（集成Markdown编辑器）
6. ✅ 实现需求/Bug的筛选、搜索、统计功能
7. ✅ 实现Bug关联需求功能
8. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段5: 任务与看板系统（TDD） ✅

1. ⏳ **设计文档**：编写任务与看板系统详细设计
2. ⏳ **单元测试**：编写任务、看板相关单元测试
3. ✅ 实现任务管理API（创建、更新、删除、状态变更、任务依赖关系，Markdown描述）
4. ✅ 实现看板API（看板、列、任务拖拽排序）
5. ✅ 开发任务管理、看板前端页面（集成Markdown编辑器）
6. ✅ 实现项目甘特图（任务时间线、依赖关系、进度可视化）
7. ✅ 实现项目进度跟踪（统计图表、进度报表）
8. ✅ 集成甘特图组件（使用原生ECharts实现）
9. ⏳ **测试覆盖**：确保单元测试覆盖率100%

8. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段7: 版本与构建管理（TDD） ✅

1. ⏳ **设计文档**：编写版本与构建管理详细设计
2. ⏳ **单元测试**：编写版本、构建相关单元测试
3. ✅ 实现构建管理API（创建构建、构建状态、构建时间）
4. ✅ 实现版本管理API（一个构建产生一个版本，Markdown发布说明）
5. ✅ 开发版本管理、构建管理前端页面（集成Markdown编辑器）
6. ✅ 实现版本关联需求和Bug（多对多关系）
7. ✅ 实现版本发布流程（检查构建状态）
8. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段7: 测试管理（TDD） ✅

1. ⏳ **设计文档**：编写测试管理详细设计
2. ⏳ **单元测试**：编写测试单、测试报告相关单元测试
3. ✅ 实现测试单管理API（创建、编辑、状态管理，Markdown测试步骤，多测试类型）
4. ✅ 实现测试报告管理API（创建、编辑、关联测试单，Markdown报告内容）
5. ✅ 实现测试单-Bug关联、测试单-测试报告关联
6. ✅ 开发测试管理前端页面（集成Markdown编辑器）
7. ✅ 实现测试统计和覆盖率分析（通过率、失败率、按项目统计、按类型统计）
8. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段9: 资源管理（TDD） ✅

1. ⏳ **设计文档**：编写资源管理详细设计
2. ⏳ **单元测试**：编写资源管理相关单元测试
3. ✅ 实现资源统计API（从任务和Bug工时统计资源使用情况）
4. ✅ 实现资源分配自动管理（通过任务和Bug工时自动创建资源分配）
5. ✅ 开发资源统计前端页面（按项目和人员统计工时）
6. ✅ 实现资源冲突检测和预警（检查同一人员在同一天的工时是否超过24小时或12小时）
7. ✅ 实现资源利用率分析（按资源统计利用率，显示平均利用率）
8. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段9: 插件管理系统（TDD） ⏳

1. ⏳ **设计文档**：编写插件系统详细设计（包含前端界面支持、插件市场）
2. ⏳ **单元测试**：编写插件系统相关单元测试
3. ⏳ 设计插件架构（插件接口规范、生命周期钩子、前端界面规范）
4. ⏳ 实现插件管理API（安装、卸载、启用、禁用、配置）
5. ⏳ 实现插件加载机制（动态加载、热更新）
6. ⏳ 实现插件前端界面支持（插件可注册前端路由、菜单项、页面组件）
7. ⏳ 实现插件前端路由动态注册机制（Vue Router动态路由）
8. ⏳ 实现插件Vue组件动态加载机制
9. ⏳ 开发插件管理前端页面（插件列表、安装、配置、界面预览）
10. ⏳ 实现插件权限控制和API访问控制
11. ⏳ 设计插件市场架构（插件发布、版本管理、评分、评论）
12. ⏳ 实现插件市场API（插件列表、搜索、分类、详情、下载、安装）
13. ⏳ 开发插件市场前端页面（市场首页、插件详情、搜索、分类浏览）
14. ⏳ 实现插件市场功能（插件上传、版本管理、插件审核）
15. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段10: 工作报告系统（TDD） ⏳

1. ⏳ **设计文档**：编写工作报告系统详细设计
2. ⏳ **单元测试**：编写工作报告相关单元测试
3. ⏳ 实现日报管理API（创建、编辑、查询、提交、审批，Markdown内容）
4. ⏳ 实现周报管理API（创建、编辑、查询、提交、审批，Markdown内容）
5. ⏳ 实现报告模板管理（日报/周报模板配置）
6. ⏳ 开发日报/周报前端页面（报告填写、列表、统计、审批，集成Markdown编辑器）
7. ⏳ 实现报告关联任务/项目，自动汇总工时
8. ⏳ 实现报告统计和导出功能（Excel导出）
9. ⏳ 实现报告审批流程
10. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段11: 关系图生成（TDD） ⏳

1. ⏳ **设计文档**：编写关系图生成详细设计
2. ⏳ **单元测试**：编写关系图生成相关单元测试
3. ⏳ 实现数据库ER图自动生成（基于GORM模型）
4. ⏳ 实现业务实体关系图生成（项目-任务等关系）
5. ⏳ 开发关系图展示前端页面（使用图形库如vis.js或mermaid）
6. ⏳ 实现关系图导出功能（PNG、SVG、PDF）
7. ⏳ 实现关系图交互功能（点击查看详情、筛选）
8. ⏳ **测试覆盖**：确保单元测试覆盖率100%

### 阶段12: 完善与优化 ⏳

1. ⏳ 添加数据验证和错误处理（统一验证规则）
2. ⏳ 实现搜索、筛选、分页等通用功能
3. ⏳ 添加操作日志（审计日志）
4. ⏳ 实现数据导入导出功能
5. ⏳ 性能优化和测试（单元测试、集成测试）
6. ⏳ 编写API文档（Swagger/OpenAPI）
7. ⏳ 实现系统配置管理
8. ⏳ 实现消息通知功能（站内信、邮件）
9. ⏳ **测试覆盖率检查**：确保所有模块单元测试覆盖率100%

## 关键技术点

1. **GORM模型定义**: 使用标签定义关联关系、索引、约束、软删除，兼容SQLite和MySQL
2. **权限中间件**: 基于RBAC的权限验证中间件，支持资源级权限控制
3. **微信登录流程**: 前端获取二维码 -> 用户扫码 -> 后端验证 -> 返回Token -> 存储用户信息
4. **看板拖拽**: 使用Vue DnD或Sortable.js实现任务拖拽排序
5. **甘特图组件**: 使用dhtmlx-gantt或vue-gantt-elastic实现项目甘特图，支持任务依赖关系可视化
6. **任务依赖关系**: 在Task模型中添加前置任务依赖字段，支持任务链和关键路径计算
7. **资源按小时管理**: ResourceAllocation模型支持日期+小时数的精确分配，支持资源日历视图
8. **插件系统**: 设计插件接口规范，支持插件动态加载、配置管理、生命周期钩子、API扩展、前端界面注册和显示（Vue组件动态加载、路由动态注册）
9. **工作报告**: 支持日报和周报的填写、提交、审批，自动关联任务/项目并汇总工时，支持Markdown格式
10. **关系图生成**: 基于GORM模型自动生成ER图，支持业务关系图可视化
11. **Markdown支持**: 需求、Bug、任务、版本、测试报告、工作报告等模块支持Markdown格式编辑和展示
12. **数据关联查询**: GORM的Preload和Joins优化查询性能，避免N+1问题
13. **API设计**: RESTful风格，统一响应格式，版本控制
14. **前端状态管理**: 使用Pinia管理全局状态，模块化设计
15. **文件上传**: 支持附件上传（需求、Bug、任务等关联文件）
16. **TDD开发**: 每个功能先写测试，再实现，确保覆盖率100%
17. **数据库兼容**: 使用GORM抽象层，支持SQLite和MySQL无缝切换

## 数据库关系说明

### 核心关系

1. **项目-需求关系**: 一个Project可以关联多个Requirement
2. **项目-任务关系**: 一个Project包含多个Task
3. **任务依赖关系**: Task可以依赖多个前置Task（多对多）
4. **构建-版本关系**: 一个Build产生一个Version
5. **测试单关联**: TestCase可以关联多个Bug和多个TestReport
6. **资源分配**: ResourceAllocation按小时记录，关联User、Project、Task
7. **工作报告**: DailyReport和WeeklyReport关联User、Project、Task
8. **插件路由**: PluginRoute关联Plugin，支持前端路由和菜单注册

## 开发注意事项

1. **TDD开发**: 严格遵循TDD流程，先写测试再实现功能，确保覆盖率100%
2. **详细设计**: 每个模块开发前必须完成详细设计文档
3. **数据一致性**: 使用数据库事务保证关联数据的一致性
4. **性能优化**: 合理使用索引，避免全表扫描，使用分页查询
5. **安全性**: 输入验证、SQL注入防护、XSS防护、CSRF防护
6. **可扩展性**: 插件系统设计要支持未来功能扩展，前端界面动态加载
7. **用户体验**: 前端交互要流畅，支持快捷键、批量操作，Markdown编辑体验优化
8. **数据备份**: 定期备份数据库（SQLite文件或MySQL备份）
9. **日志记录**: 关键操作要记录日志，便于问题排查
10. **错误处理**: 友好的错误提示，避免暴露系统内部信息
11. **数据库兼容**: 避免使用数据库特定语法，使用GORM抽象层
12. **测试覆盖**: 每个功能模块必须达到100%测试覆盖率

## 测试计划

1. **单元测试**: 核心业务逻辑单元测试（Go test），覆盖率100%
2. **集成测试**: API接口集成测试
3. **前端测试**: 组件测试、E2E测试（可选）
4. **性能测试**: 并发测试、压力测试
5. **安全测试**: 权限测试、SQL注入测试
6. **数据库兼容测试**: SQLite和MySQL切换测试

## 部署方案

1. **开发环境**: 本地开发，前后端分离运行
2. **生产环境**: 
   - 后端：编译为二进制文件，使用systemd或supervisor管理
   - 前端：构建为静态文件，后端自动服务（无需Nginx，也可使用Nginx反向代理）
   - 数据库：SQLite文件（开发）或MySQL（生产），定期备份
3. **配置管理**: 使用环境变量或配置文件管理不同环境配置
4. **数据库切换**: 通过配置文件切换SQLite和MySQL
5. **静态文件服务**: 后端自动查找并服务 `frontend/dist` 目录，支持 SPA 路由

## 进度跟踪

### 已完成 ✅
- 阶段0: 详细设计文档
- 阶段1: 项目初始化与基础架构（包括Markdown编辑器集成）
  - ✅ 系统初始化功能
    - ✅ 系统初始化状态检查
    - ✅ 微信配置保存（第一步）
    - ✅ 微信扫码初始化（第二步：通过微信登录创建管理员）
    - ✅ 密码登录初始化（第二步：通过用户名密码创建管理员）
    - ✅ 初始化二维码生成
    - ✅ WebSocket 扫码通知
  - ✅ 后端静态文件服务（支持前端 SPA 路由）
  - ✅ TypeScript 类型系统完善（所有类型错误已修复）
- 阶段2: 认证与权限系统（基本完成，单元测试待补充）
  - ✅ 用户管理功能完善
    - ✅ 用户昵称功能（username用于登录，nickname用于显示，格式：username(nickname)）
    - ✅ 扫码添加用户后显示昵称设置对话框
    - ✅ 用户列表和编辑表单支持昵称显示和编辑
    - ✅ 软删除用户后再次添加时自动恢复机制
    - ✅ 并发创建用户时的冲突处理（重试机制）
    - ✅ SQLite数据库迁移优化（支持NOT NULL字段添加）
- 阶段2.5: 个人工作台（基本完成，个性化配置待实现）
- 阶段3: 项目管理（基本完成，单元测试待补充）
  - ✅ 项目管理
  - ✅ 项目成员管理
  - ✅ 项目统计和概览功能
- 阶段4: 需求与Bug管理（基本完成，单元测试待补充）
  - ✅ 需求管理API（CRUD、状态流转、关联项目）
  - ✅ Bug管理API（CRUD、状态流转、分配、优先级管理）
  - ✅ 需求管理、Bug管理前端页面
  - ✅ Markdown编辑器集成
  - ✅ 筛选、搜索、统计功能
  - ✅ Bug关联需求功能
- 阶段5: 任务与看板系统（基本完成，单元测试待补充）
  - ✅ 任务管理API（CRUD、状态流转、进度管理、任务依赖关系）
  - ✅ 任务工时管理（预估工时、实际工时、自动计算进度）
  - ✅ 任务进度更新界面（支持预估工时、实际工时、工作日期）
  - ✅ 进度自动计算（实际工时/预估工时 * 100，范围0-100%）
  - ✅ 资源分配自动创建（更新实际工时时自动创建资源分配记录）
  - ✅ 看板API（看板、列、任务拖拽排序）
  - ✅ 任务管理、看板前端页面
  - ✅ 项目甘特图（任务时间线、依赖关系、进度可视化）
  - ✅ 项目进度跟踪（统计图表、进度报表）
- 阶段6: 版本管理（基本完成，单元测试待补充）
  - ✅ 版本管理API（版本CRUD，Markdown发布说明）
  - ✅ 版本关联需求和Bug（多对多关系）
  - ✅ 版本状态管理
  - ✅ 版本管理前端页面（集成Markdown编辑器）

### 进行中 ⏳
- 单元测试补充（各模块测试覆盖率提升）

### 已完成 ✅
- 阶段7: 测试管理（核心功能已完成，单元测试待补充）
  - ✅ 测试单管理API（CRUD、多测试类型、状态管理、关联Bug）
  - ✅ 测试报告管理API（CRUD、关联测试单）
  - ✅ 测试单管理、测试报告管理前端页面（集成Markdown编辑器）
  - ✅ 测试统计和覆盖率分析（通过率、失败率、按项目统计、按类型统计）
  - ⏳ 单元测试补充
- 阶段8: 资源管理（核心功能已完成，单元测试待补充）
  - ✅ 资源统计API（从任务和Bug工时统计资源使用情况）
  - ✅ 资源统计前端页面（按项目和人员统计工时）
  - ✅ 资源分配自动管理（通过任务和Bug工时自动创建资源分配）
  - ✅ 资源冲突检测和预警（检查同一人员在同一天的工时是否超过24小时或12小时）
  - ✅ 资源利用率分析（按资源统计利用率，显示平均利用率）
  - ⏳ 单元测试补充
- 阶段10: 工作报告系统（v0.2.0优化，核心功能已完成，单元测试待补充）
  - ✅ 日报管理API（CRUD、提交、审批，Markdown内容）
  - ✅ 周报管理API（CRUD、提交、审批，Markdown内容）
  - ✅ 工作汇总API（自动汇总资源分配记录和用户创建的Bug）
  - ✅ 工作报告前端页面（日报、周报、审批，集成Markdown编辑器）
  - ✅ 工作内容Markdown渲染（列表页限制2行显示）
  - ✅ 提交按钮优化（自动设置状态为已提交）
  - ✅ 审批流程优化（显示所有审批人状态）
  - ⏳ 单元测试补充
- v0.2.0 新功能
  - ✅ 微信账号绑定功能（获取绑定二维码、处理绑定回调、解绑微信、WebSocket实时通知）
  - ✅ 附件管理功能（文件上传、下载、关联实体、附件列表管理）
  - ✅ 系统初始化流程优化（微信配置移至系统管理菜单）
  - ✅ 权限管理优化（测试单权限、角色权限配置、项目创建者自动加入）
  - ✅ 部门管理优化（树形结构显示优化、修复重复显示问题）
  - ✅ 菜单管理优化（修复菜单排序问题、创建默认角色并分配权限）
- v0.3.0 新功能
  - ✅ 禅道数据迁移工具
    - ✅ 部门、角色、用户迁移
    - ✅ 项目、项目模块、版本迁移
    - ✅ 需求、任务、Bug迁移
    - ✅ 项目成员迁移
    - ✅ ID映射关系维护
    - ✅ 数据去重和冲突处理
  - ✅ 通用组件封装
    - ✅ 模块管理组件封装为通用组件（ModuleManagement）
    - ✅ 支持通过props控制显示方式
    - ✅ 支持事件通知和数据刷新
  - ✅ 项目详情页优化
    - ✅ 修复页面滚动问题（使用flex布局）
    - ✅ 项目描述支持Markdown格式渲染显示
    - ✅ 功能模块管理直接弹出对话框

### 待开始 📋
- 阶段9: 插件管理系统
- 阶段11: 关系图生成

## 里程碑

- **M1**: 基础架构完成（✅ 已完成）
- **M2**: 认证权限系统完成（✅ 基本完成，测试待补充）
- **M3**: 核心业务模块完成（✅ 项目、需求、Bug、任务、版本与构建已完成）
- **M4**: 高级功能完成（✅ 甘特图、进度跟踪、资源管理、工作报告已完成）
- **M5**: v0.2.0 功能完成（✅ 微信绑定、附件管理、工作报告优化已完成）
- **M6**: v0.3.0 功能完成（✅ 数据迁移工具、通用组件封装、项目详情页优化已完成）
- **M7**: 插件系统完成（⏳ 待开始）
- **M8**: 系统完善和优化（⏳ 进行中：单元测试补充）

## 风险评估

1. **微信登录集成**: 需要真实的AppID和AppSecret，开发阶段可使用模拟数据
2. **插件系统复杂度**: 插件系统设计较复杂，需要仔细设计接口规范
3. **测试覆盖率**: 100%覆盖率目标较高，需要持续关注
4. **数据库兼容**: SQLite和MySQL的差异需要仔细处理
5. **前端性能**: 大量数据的前端渲染性能需要优化

## 后续计划

1. 继续完成个人工作台功能
2. 逐步实现其他业务功能模块
3. 完善测试覆盖
4. 优化性能和用户体验

---

**文档版本**: v1.5  
**最后更新**: 2025年11月26日  
**维护者**: 开发团队

